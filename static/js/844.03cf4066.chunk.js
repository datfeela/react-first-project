"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[844],{9844:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var a=t(885),r=t(5987),s="Chat_wrap__5o1kl",c="Chat_contentWrap__ZReIg",i="Header_wrap__mPPRP",u="Header_wrap_dark__fOQUZ",o="Header_goBackButton__DBsF9",d="Header_name__9uURf",l="Header_icon__eZcsh",g="Header_userInfo__RJusU",h="Header_imgLink__OaE9d",f="Header_avatar__R5ZIG",_=t(9029),m=t(3504),p=t(2791),v=t(9067),x=t(184),I=function(e){var n=e.recipientImage,t=e.recipientName,a=e.dialogId,r=(0,p.useContext)(v.I);return(0,x.jsxs)("div",{className:"dark"===r.currentTheme?i+" "+u:i,children:[(0,x.jsxs)(m.OL,{to:"/messages",className:o,children:[(0,x.jsx)(_.O,{className:l,id:"arrowBack"}),(0,x.jsxs)("span",{children:["eng"===r.currentLanguage&&"Go back"," ","ru"===r.currentLanguage&&"\u041d\u0430\u0437\u0430\u0434"]})]}),(0,x.jsx)("div",{className:g,children:(0,x.jsx)(m.OL,{to:"/profile/".concat(a),className:d,children:t})}),(0,x.jsx)(m.OL,{className:h,to:"/profile/".concat(a),children:(0,x.jsx)("img",{src:n,alt:"avatar",className:f})})]})},w=t(1413),N="Messages_wrap__h7bIs",b="Messages_wrap_dark__sc4Lk",j=t(364),M=function(e){switch(e){case"01":return"Jan";case"02":return"Feb";case"03":return"Mar";case"04":return"Apr";case"05":return"May";case"06":return"Jun";case"07":return"Jul";case"08":return"Aug";case"09":return"Sep";case"10":return"Oct";case"11":return"Nov";case"12":return"Dec"}},y={wrap:"Message_wrap__gc5Pe",wrap_notViewed:"Message_wrap_notViewed__spOBk",wrap_sentByUser:"Message_wrap_sentByUser__q17wi",wrap_sentByRecipient:"Message_wrap_sentByRecipient__qJByW",wrap_dark:"Message_wrap_dark__Ukxpv",author:"Message_author__o-jAe",content:"Message_content__rGUGH",avatarWrap:"Message_avatarWrap__Zxl2B",avatar:"Message_avatar__wLnX6",arrivalTime:"Message_arrivalTime__0duye"},k=function(e,n){var t=e.year==(new Date).getFullYear(),a=t&&e.monthNum==(new Date).getMonth()+1&&e.day==(new Date).getDate();return"eng"===n?a?"".concat(e.hour,":").concat(e.minute,":").concat(e.second):t?"".concat(e.month," ").concat(e.day,", ").concat(e.hour,":").concat(e.minute,":").concat(e.second):"".concat(e.month," ").concat(e.day,", ").concat(e.year," ").concat(e.hour,":").concat(e.minute,":").concat(e.second):"ru"===n?a?"".concat(e.hour,":").concat(e.minute,":").concat(e.second):t?"".concat(e.day,".").concat(e.monthNum,", ").concat(e.hour,":").concat(e.minute,":").concat(e.second):"".concat(e.day,".").concat(e.monthNum,".").concat(e.year,", ").concat(e.hour,":").concat(e.minute,":").concat(e.second):void 0},C=(0,j.$j)((function(e){return{authUserId:e.auth.id}}),{})((function(e){var n=(0,p.useContext)(v.I),t="".concat(y.wrap," ").concat(e.authUserId===e.senderId?y.wrap_sentByUser:y.wrap_sentByRecipient," ").concat(e.viewed?"":y.wrap_notViewed," ").concat("dark"===n.currentTheme?y.wrap_dark:""),a=e.authUserId===e.senderId?e.userImage:e.recipientImage,r=function(e){var n=e.slice(0,e.indexOf("T")),t=n.slice(0,n.indexOf("-")),a=n.slice(5,7),r=M(a);n=n.slice(-2);var s=e.slice(e.indexOf("T")+1);return{year:t,monthNum:a,month:r,day:n,fullTime:s.slice(0,s.indexOf(".")),hour:s.slice(0,2),minute:s.slice(3,5),second:s.slice(6,8)}}(e.addedAt),s=k(r,n.currentLanguage);return(0,x.jsxs)("div",{id:e.id,className:t,children:[(0,x.jsx)(m.OL,{to:"/profile/".concat(e.senderId),className:y.avatarWrap,children:(0,x.jsx)("img",{className:y.avatar,src:a,alt:"avatar"})}),(0,x.jsxs)("div",{className:y.content,children:[(0,x.jsx)(m.OL,{to:"/profile/".concat(e.senderId),className:y.author,children:e.senderName}),(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:e.body}}),(0,x.jsx)("div",{className:y.meta,children:(0,x.jsx)("span",{className:y.arrivalTime,children:s})})]})]})})),H=t(4786),Z=["currentPage","setIsNewMessage","inputHeight","dialogId","getDialog","observerRef","setObserverRef"],L=function(e){e.currentPage;var n=e.setIsNewMessage,t=e.inputHeight,a=e.dialogId,s=e.getDialog,c=e.observerRef,i=e.setObserverRef,u=(0,r.Z)(e,Z),o=(0,p.useContext)(v.I);(0,p.useEffect)((function(){!0===u.messages.isNewMessage&&(f(),n(!1))}),[u.messages.isNewMessage]),(0,p.useEffect)((function(){f()}),[]),(0,p.useEffect)((function(){if(h&&h[1]){u.messages.isNewMessage&&null!==c.observer&&c.observer.unobserve(c.target);var e=document.querySelector('[id="'.concat(h[1].key,'"]')),n=(0,H.H)(d,l);i({observer:n,target:e}),n.observe(e)}}),[u.messages.data]);var d={root:document.querySelector(N)},l=function(){s(a)},g=(0,p.useRef)(),h=u.messages.data.map((function(e){return(0,x.jsx)(C,(0,w.Z)((0,w.Z)({},e),{},{userImage:u.userImage,recipientImage:u.recipientImage}),e.id)})),f=function(){var e=g.current.scrollHeight,n=window.getComputedStyle(g.current).height;n=n.slice(0,n.indexOf("p")),g.current.scrollTop=e-n};return(0,x.jsx)("div",{ref:g,className:"dark"===o.currentTheme?N+" "+b:N,style:{marginBottom:t},children:h})},O="Input_wrap__wn37F",B="Input_wrap_dark__-AchI",T="Input_form__oz+BC",U="Input_button__Ur7gg",R=t(5705),A=t(5689),S=t(4759),D=["dialogId","onInputHeightChange"],E=function(e){return(0,A.sx)(e)},F=function(e){var n=e.dialogId,t=e.onInputHeightChange,a=(0,r.Z)(e,D),s=(0,p.useContext)(v.I),c=(0,p.useRef)(),i=function(){t(window.getComputedStyle(c.current).height)};return(0,x.jsx)("div",{ref:c,className:"dark"===s.currentTheme?O+" "+B:O,children:(0,x.jsx)(R.J9,{initialValues:{newMessageText:""},onSubmit:function(e,r){a.sendMessage(n,e.newMessageText),t("67px"),r.setSubmitting(!1),r.resetForm()},children:function(e){var n=e.isSubmitting;return(0,x.jsxs)(R.l0,{className:T,children:[(0,x.jsx)(R.gN,{type:"text",name:"newMessageText",component:S.C,onHeightChange:i,validate:E,placeholder:"eng"===s.currentLanguage?"Type a message...":"ru"===s.currentLanguage&&"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",defaultHeight:40,maxHeight:"200px"}),(0,x.jsxs)("button",{className:U+" button",type:"submit",disabled:n,children:["eng"===s.currentLanguage&&"Send"," ","ru"===s.currentLanguage&&"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"]})]})}})})},P=t(5556),W=t(6871),q=t(6613),J=["isInit","initializeChat","cleanUpChat","setIsNewMessage","messages","sendMessage"],z=function(e){var n=e.isInit,t=e.initializeChat,i=e.cleanUpChat,u=e.setIsNewMessage,o=e.messages,d=e.sendMessage,l=(0,r.Z)(e,J),g=(0,p.useContext)(v.I);document.title="eng"===g.currentLanguage?"Messages | Feelanet":"ru"===g.currentLanguage&&"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f | Feelanet",(0,p.useEffect)((function(){(0,q.J)()?g.setIsScrollbarActive(!0):g.setIsScrollbarActive(!1)})),(0,p.useEffect)((function(){return t(h),document.title="Dialogs | Feelanet",function(){i()}}),[]);var h=(0,W.UO)().userId,f=(0,p.useState)("67px"),_=(0,a.Z)(f,2),m=_[0],w=_[1],N=(0,p.useState)({observer:null,target:null}),b=(0,a.Z)(N,2),j=b[0],M=b[1];return n?n?(0,x.jsx)("div",{className:s,children:(0,x.jsxs)("div",{className:c+" wrapNoPadding",children:[(0,x.jsx)(I,{recipientImage:l.recipientImage,recipientName:l.recipientName,dialogId:h}),(0,x.jsx)(L,{setIsNewMessage:u,messages:o,userImage:l.userImage,recipientImage:l.recipientImage,inputHeight:m,dialogId:h,getDialog:l.getDialog,observerRef:j,setObserverRef:M}),(0,x.jsx)(F,{sendMessage:d,dialogId:h,onInputHeightChange:function(e){w(e)}})]})}):void 0:(0,x.jsx)("div",{className:s+" wrapNoPadding",children:(0,x.jsx)(P.Z,{})})},G=t(2190),V=t(7781),$=t(1548),Q=t(7030),X={initializeChat:G.aT,cleanUpChat:G.fH,setIsNewMessage:G.IW,sendMessage:G.bG,getDialog:G.Yq},Y=(0,V.qC)($.D,(0,j.$j)((function(e){return{isInit:(0,Q.RU)(e),messages:(0,Q.AZ)(e),userImage:(0,Q.a8)(e),recipientImage:(0,Q.Md)(e),recipientName:(0,Q.Z6)(e)}}),X))(z)},4759:function(e,n,t){t.d(n,{P:function(){return N},C:function(){return b}});var a=t(1413),r=t(5987),s="Inputs_inputWrap__bxhik",c="Inputs_inputWrap_withIcon__xxyLT",i="Inputs_inputWrap_dark__wb1gX",u="Inputs_input__6JgzO",o="Inputs_icon__v2Fgu",d="Inputs_input_error__N+OzZ",l="Inputs_textarea__K0ZBr",g="Inputs_textarea_dark__ibBbA",h="Inputs_checkboxWrap__AZQyn",f="Inputs_checkbox__gnsjA",_="Inputs_checkbox__label__G4bqt",m=t(2791),p=t(9029),v=t(9067),x=t(184),I=["form","field","options","onValueChange","children"],w=["form","field"],N=function(e){var n=e.form,t=e.field,l=e.options,g=e.onValueChange,w=(e.children,(0,r.Z)(e,I)),N=(0,m.useContext)(v.I);l&&l.inputMaxLength&&t.value.length>l.inputMaxLength&&(t.value=t.value.substr(0,l.inputMaxLength)),(0,m.useEffect)((function(){g&&g(t.value)}),[t.value]);var b,j="dark"===N.currentTheme?s+" "+i:s;switch(w.type){case"text":j=l&&l.icon?j+" "+c:j,b=l&&l.showErrors&&n.errors[t.name]?u+" "+d:u;break;case"checkbox":j=h,b=f;break;default:b=l&&l.showErrors&&n.errors[t.name]?u+" "+d:u}return(0,x.jsxs)("div",{className:j,children:[(0,x.jsx)("input",(0,a.Z)({style:{border:l&&l.border,padding:l&&l.padding},name:t.name,value:t.value,onChange:n.handleChange,className:b,checked:t.checked},w)),l&&l.icon&&(0,x.jsx)(p.O,{className:o,id:l.icon}),w.label&&(0,x.jsx)("span",{className:_,children:w.label})]})},b=function(e){var n=e.form,t=e.field,a=(0,r.Z)(e,w),s=(0,m.useContext)(v.I),c=m.createRef();(0,m.useEffect)((function(){n.values[t.name]||i()}),[n.values]);var i=function(){c.current.style.height="".concat(a.defaultHeight+2,"px")},u=(a.inputType,"dark"===s.currentTheme?l+" "+g:l);return(0,x.jsx)("textarea",{ref:c,style:{height:"".concat(a.defaultHeight,"px"),maxHeight:a.maxHeight},type:a.type,name:t.name,onChange:function(e){n.handleChange(e),function(e){c.current.style.height="".concat(a.defaultHeight+2,"px");var n="".concat(e.target.scrollHeight,"px");c.current.style.height=n,a.onHeightChange&&a.onHeightChange()}(e)},onFocus:function(){a.onFocus&&a.onFocus()},onBlur:function(){a.onBlur&&a.onBlur()},value:t.value,className:u,placeholder:a.placeholder})}},5556:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(695),r="Preloader_wrap__BkHvc",s="Preloader_gif__18c7L",c=t(184),i=function(e){return(0,c.jsx)("div",{className:r,children:(0,c.jsx)("img",{className:s,src:a})})}},1548:function(e,n,t){t.d(n,{D:function(){return u}});var a=t(1413),r=t(364),s=t(6871),c=t(7561),i=t(184),u=function(e){var n={getUserData:c.is};return(0,r.$j)((function(e){return{isAuth:e.auth.isAuth}}),n)((function(n){return n.isAuth?(0,i.jsx)(e,(0,a.Z)({},n)):(0,i.jsx)(s.Fg,{replace:!0,to:"/login"})}))}},7030:function(e,n,t){t.d(n,{ru:function(){return r},RU:function(){return s},oq:function(){return c},$U:function(){return i},AZ:function(){return u},a8:function(){return o},Z6:function(){return d},Md:function(){return l}});var a=t(6916),r=function(e){return e.chat.dialogsIsInit},s=function(e){return e.chat.chatIsInit},c=function(e){return e.chat.dialogsSearchTerm},i=(0,a.P1)((function(e){return e.chat.dialogs}),c,(function(e,n){return e.filter((function(e){return e.userName.includes(n)}))})),u=function(e){return e.chat.messages},o=function(e){return e.chat.userPhoto},d=function(e){return e.chat.recipientName},l=function(e){return e.chat.recipientPhoto}},6613:function(e,n,t){t.d(n,{J:function(){return a}});var a=function(){return document.body.clientWidth<window.innerWidth}},5689:function(e,n,t){t.d(n,{q9:function(){return a},sx:function(){return r},BS:function(){return s},Ei:function(){return c},oH:function(){return i},mQ:function(){return u}});var a=function(e,n){var t="Field is required";return"ru"===n&&(t="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),e?void 0:t},r=function(e){return e?void 0:" "},s=function(e,n,t){var a=null;return e&&e.length>n&&(a="Must be ".concat(n," characters or less")),e&&e.length>n&&"ru"===t&&(a="\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0438 - ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),a},c=function(e,n,t){var a=null;return e&&e.length<n&&(a="Must be ".concat(n," characters or less")),e&&e.length<n&&"ru"===t&&(a="\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0438 - ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),a},i=function(e,n){var t;return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(t="Invalid Email address","ru"===n&&(t="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email \u0430\u0434\u0440\u0435\u0441")),t},u=function(e,n){var t;return 0===e.length||/^[A-Z0-9._%+-]+\.[A-Z0-9/._-]{2,1000}$/i.test(e)||(t="Invalid URL","ru"===n&&(t="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 URL \u0430\u0434\u0440\u0435\u0441")),t}},4786:function(e,n,t){t.d(n,{H:function(){return a}});var a=function(e,n){var t=e.root,a=e.rootMargin,r=void 0===a?"0px":a,s=e.threshold;return new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(n(),t.unobserve(e.target))}))}),{root:t,rootMargin:r,threshold:void 0===s?.1:s})}},695:function(e,n,t){e.exports=t.p+"static/media/preloading.20a21d3c5d14bc614403.gif"}}]);
//# sourceMappingURL=844.03cf4066.chunk.js.map